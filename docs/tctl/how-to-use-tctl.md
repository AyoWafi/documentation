---
id: how-to-use-tctl
title: How to use tctl
sidebar_label: How to use
---

> The Temporal tctl documentation covers version 1.16 of the Temporal CLI.

:::note

This page is temporary. We plan to move the information to other pages.

:::

## Quick Start

- Run `tctl -h` for help on top-level commands and global options
- Run `tctl namespace -h` for help on namespace operations
- Run `tctl workflow -h` for help on Workflow operations
- Run `tctl taskqueue -h` for help on Task Queue operations

**Note:** Ensure you have a Temporal Server running before using CLI.

### Namespace operation examples

:::note

This information has been moved to namespace register

:::

### Workflow operation examples

The following examples assume the `TEMPORAL_CLI_NAMESPACE` environment variable is set.

#### Show running Workers of a Task Queue

:::note

This information has been moved to taskqueue describe

:::

##### Reuse the same Workflow Id when starting/running a Workflow

::: note
tctl information has been moved to start and run
:::

##### Start a Workflow with a memo

:::note
moved this
:::

#### Show Workflow history

:::note
moved
:::

#### Query Workflow Execution

:::note
moved
:::

#### Signal, cancel, terminate Workflow

:::note
moved
:::

#### Signal, cancel, terminate workflows as a batch job

:::note
moved
:::

#### Restart, reset Workflow

:::note
moved
:::

#### Recovery from bad deployment -- auto-reset workflow

If a bad deployment lets a workflow run into a wrong state, you might want to reset the workflow to the point that the bad deployment started to run.
But usually it is not easy to find out all the workflows impacted, and every reset point for each workflow.
In this case, auto-reset will automatically reset all the workflows given a bad deployment identifier.

Let's get familiar with some concepts.
Each deployment will have an identifier, we call it "**Binary Checksum**" as it is usually generated by the md5sum of a binary file.
For a workflow, each binary checksum will be associated with an **auto-reset point**, which contains a **runId**, an **eventID**, and the **created_time** that binary/deployment made the first command for the workflow.

To find out which **binary checksum** of the bad deployment to reset, you should be aware of at least one workflow running into a bad state.
Use the describe command with **--reset_points_only** option to show all the reset points:

```bash
tctl workflow desc -w <WorkflowId>  --reset_points_only
+----------------------------------+--------------------------------+--------------------------------------+---------+
|         BINARY CHECKSUM          |          CREATE TIME           |                RUNID                 | EVENTID |
+----------------------------------+--------------------------------+--------------------------------------+---------+
| c84c5afa552613a83294793f4e664a7f | 2019-05-24 10:01:00.398455019  | 2dd29ab7-2dd8-4668-83e0-89cae261cfb1 |       4 |
| aae748fdc557a3f873adbe1dd066713f | 2019-05-24 11:01:00.067691445  | d42d21b8-2adb-4313-b069-3837d44d6ce6 |       4 |
...
...
```

Then use this command to tell Temporal to auto-reset all Workflows impacted by the bad deployment.
The command stores the bad binary checksum into namespace info and triggers a process to reset all your Workflows.

```bash
tctl --ns <YourNamespace> namespace update --add_bad_binary aae748fdc557a3f873adbe1dd066713f  --reason "rollback bad deployment"
```

After you add the checksum of the bad binary to your namespace, Temporal will not dispatch any command tasks to the bad binary.
So make sure that you have rolled back to a good deployment(or roll out new bits with bug fixes).
Otherwise your workflow can't make any progress after auto-reset.

#### Secure connection to Temporal cluster

:::note
wrote about this already
:::

### Add custom Search Attributes to a Cluster

:::note
see file
:::

## Start Workflow with Search Attributes

:::note
start
:::

### Workflow Id Uniqueness

:::note
already exists in start and concept pages
:::

### CLI Help

:::note
should be obvious. use help.
:::

## Debugging with tctl

:::note
why?
:::

### `tctl workflow stack`

:::note
stack
:::

### `tctl workflow describe`

:::note
garbage
:::

## Securing `tctl`

:::note
plugin pages
:::
